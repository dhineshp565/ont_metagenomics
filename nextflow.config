manifest {
	homePage = 'https://github.com/dhineshp565/ont_metagenomics'
	description = 'Pipeline for metagenomics sequencing using Oxford nanopore sequencing'
	author= 'dhineshp565'
   	mainScript = 'main.nf'
    version = "v1.1.4"
	nextflowVersion= '>=22.12.0-edge'
	manifest.defaultBranch = "main"
	name = 'dhineshp565/ont_metagenomics'
}

params {

   	input='filepath'
    out_dir= 'output'	
	// Dehosting parameters
	dehost= true
	host_db= '/data/referenceDB/kraken/k2_bos_taurus_db_12012026/'
	kraken_db= '/data/referenceDB/kraken/k2_pluspf_08gb_20230605'
	trim_barcodes= false
	qscore= 10
	blastdb_path= "/data/referenceDB/blast/microbe_db"
	blastdb_name= "microbe_db"
	
}


profiles {
    
	standard{
		
		docker {
			includeConfig 'config/docker.config'
			docker.enabled=true
		// this ensures container is run as host user and group, but
        //    also adds host user to the within-container group
        	runOptions = "--user \$(id -u):\$(id -g) --group-add 100"
		}
	}
	
}


process {
	withLabel:low {
		cpus= 1
	 	memory= 2.GB
	 	time= 2.h
	 }
	 withLabel:medium {
	 	cpus=2
	 	memory= 4.GB
		time= 4.h
	 }
	 withLabel:high {
	 	cpus=5
	 	memory=9.GB
	 	time= 8.h
	 }
}

timeline {
  enabled = true
  overwrite = true
  file = "${params.out_dir}/execution/timeline.html"
}
report {
  enabled = true
  overwrite = true
  file = "${params.out_dir}/execution/report.html"
}
trace {
  enabled = true
  overwrite = true
  file = "${params.out_dir}/execution/trace.txt"
}
